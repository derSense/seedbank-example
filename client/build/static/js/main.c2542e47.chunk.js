(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(2),c=a(3),u=a(5),o=a(4),i=a(6),s=a(12),m=a(14),h=a(10),p=a.n(h);var b=a(16),d=a(8),v=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).state={eventname:"",sponges:""},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.submit=a.submit.bind(Object(d.a)(a)),a}return Object(i.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"submit",value:function(e){e.preventDefault(),p.a.post("/api/events",{name:this.state.eventname,sponges:this.state.sponges}).then(function(e){console.log("Created event: "+e)}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return l.a.createElement("form",{onSubmit:this.submit},l.a.createElement("label",null,"Create an event",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{type:"text",name:"eventname",placeholder:"name",value:this.state.value,onChange:this.handleChange}),l.a.createElement("input",{type:"text",name:"sponges",placeholder:"sponges",value:this.state.value,onChange:this.handleChange})),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Create"}))}}]),t}(n.Component),g=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(u.a)(this,Object(o.a)(t).call(this))).state={events:[]},e}return Object(i.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.a.get("/api/events").then(function(t){e.setState({events:t.data})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.state.events;return l.a.createElement("div",null,l.a.createElement("p",null,"Events:"),l.a.createElement("ul",null,e.map(function(e){var t=e.id,a=e.name,n=e.data;return l.a.createElement("li",{key:t.toString()},a," ",n)})))}}]),t}(n.Component),E=function(){return l.a.createElement("div",null,l.a.createElement(v,null),l.a.createElement(g,null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(s.b,{to:"/"},"Back to entryway"))},f=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).state={email:"",password:""},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.login=a.login.bind(Object(d.a)(a)),a}return Object(i.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"login",value:function(e){e.preventDefault(),p.a.post("/api/auth/login",{email:this.state.email,password:this.state.password}).then(function(e){200===e.status&&localStorage.setItem("token",e.data.token)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.login},l.a.createElement("label",null,"Login",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{type:"text",name:"email",placeholder:"email",value:this.state.value,onChange:this.handleChange}),l.a.createElement("input",{type:"text",name:"password",placeholder:"password",value:this.state.value,onChange:this.handleChange})),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Login"})))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).state={username:"",email:"",password:""},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.signup=a.signup.bind(Object(d.a)(a)),a}return Object(i.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"signup",value:function(e){e.preventDefault(),p.a.post("/api/auth/signup",{email:this.state.email,password:this.state.password,username:this.state.username}).then(function(e){200===e.status&&localStorage.setItem("token",e.data.token)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.signup},l.a.createElement("label",null,"Need to signup?",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{type:"text",name:"username",placeholder:"username",value:this.state.value,onChange:this.handleChange}),l.a.createElement("input",{type:"text",name:"email",placeholder:"email",value:this.state.value,onChange:this.handleChange}),l.a.createElement("input",{type:"text",name:"password",placeholder:"password",value:this.state.value,onChange:this.handleChange})),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Signup"})))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).logout=a.logout.bind(Object(d.a)(a)),a}return Object(i.a)(t,e),Object(c.a)(t,[{key:"logout",value:function(e){localStorage.clear()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.logout},l.a.createElement("input",{type:"submit",value:"Logout"})))}}]),t}(n.Component),y=a(28),C=a.n(y),k=a(45),w=a(46),S=a.n(w),I=p.a.create({baseURL:"http://localhost:5000/api/"});I.interceptors.response.use(function(e){return e},function(e){var t=S()(e,["response","data","err"]);return Promise.reject(t||e.message)});var x=I,J={Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"};Object(k.a)(C.a.mark(function e(){var t;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("auth/verify",{headers:J});case 3:t=e.sent,localStorage.setItem("token",t.data.token),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("err",e.t0),alert(e.t0.toString());case 11:case"end":return e.stop()}},e,null,[[0,7]])}))();var M=function(){return l.a.createElement("div",null,l.a.createElement(f,null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(O,null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(s.b,{to:"/"},"Back to entryway"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(j,null))},D=function(){return l.a.createElement("div",null,l.a.createElement("p",null,"o0Oo0o 3ntryw4y o0oO0o"),l.a.createElement("br",null),l.a.createElement(s.b,{to:"/events"},"Go to events"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(s.b,{to:"/auth"},"Login or signup"))},L=function(e){function t(){return Object(r.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement(m.d,null,l.a.createElement(m.b,{exact:!0,path:"/auth",component:M}),l.a.createElement(m.b,{exact:!0,path:"/events",component:(e=E,function(t){function a(){var e;return Object(r.a)(this,a),(e=Object(u.a)(this,Object(o.a)(a).call(this))).state={loading:!0,redirect:!1},e}return Object(i.a)(a,t),Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={authorization:"Bearer "+localStorage.getItem("token")};p.a.get("/api/auth/verify",{headers:t}).then(function(t){200===t.status?e.setState({loading:!1}):e.setState({loading:!1,redirect:!0})}).catch(function(t){e.setState({loading:!1,redirect:!0})})}},{key:"render",value:function(){var t=this.state,a=t.loading,n=t.redirect;return a?null:n?l.a.createElement(m.a,{to:"/auth"}):l.a.createElement(l.a.Fragment,null,l.a.createElement(e,this.props))}}]),a}(n.Component))}),l.a.createElement(m.b,{exact:!0,path:"/",component:D}));var e}}]),t}(n.Component),z=a(47);a.n(z).a.render(l.a.createElement(s.a,null,l.a.createElement(L,null)),document.getElementById("root"))},48:function(e,t,a){e.exports=a(116)}},[[48,1,2]]]);
//# sourceMappingURL=main.c2542e47.chunk.js.map